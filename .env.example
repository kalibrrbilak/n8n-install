# ============================================================
# n8n Configuration v2.0
# Copy this file to .env and configure your values
# ============================================================

# =========================
# Domain & URL Configuration
# =========================
DOMAIN=n8n.example.com
N8N_HOST=n8n.example.com
N8N_PORT=5678
N8N_PROTOCOL=https
WEBHOOK_URL=https://n8n.example.com/
N8N_EDITOR_BASE_URL=https://n8n.example.com/

# =========================
# Security
# =========================
# Generate with: openssl rand -hex 32
N8N_ENCRYPTION_KEY=your_64_character_hex_key_here

# =========================
# Database - PostgreSQL 16
# =========================
DB_TYPE=postgresdb
DB_POSTGRESDB_HOST=n8n-postgres
DB_POSTGRESDB_PORT=5432
DB_POSTGRESDB_DATABASE=n8n
DB_POSTGRESDB_USER=n8n
DB_POSTGRESDB_PASSWORD=your_secure_database_password
POSTGRES_USER=n8n
POSTGRES_PASSWORD=your_secure_database_password
POSTGRES_DB=n8n

# =========================
# Redis 7 - Queue & Cache
# =========================
REDIS_HOST=n8n-redis
REDIS_PORT=6379
QUEUE_BULL_REDIS_HOST=n8n-redis
QUEUE_BULL_REDIS_PORT=6379

# =========================
# Queue Mode (Performance)
# =========================
EXECUTIONS_MODE=queue

# =========================
# SSL Certificate
# =========================
SSL_EMAIL=admin@example.com

# =========================
# Timezone
# =========================
GENERIC_TIMEZONE=Europe/Moscow
TZ=Europe/Moscow

# =========================
# n8n Settings
# =========================
N8N_METRICS=true
N8N_LOG_LEVEL=info
N8N_LOG_OUTPUT=console,file
N8N_DIAGNOSTICS_ENABLED=false
N8N_PERSONALIZATION_ENABLED=false
N8N_HIRING_BANNER_ENABLED=false

# =========================
# Execute Command Node
# IMPORTANT: Required for n8n 2.0+
# =========================
N8N_ALLOW_EXEC=true
N8N_COMMUNITY_PACKAGES_ENABLED=true
EXECUTIONS_DATA_SAVE_ON_ERROR=all
EXECUTIONS_DATA_SAVE_ON_SUCCESS=all
EXECUTIONS_DATA_SAVE_MANUAL_EXECUTIONS=true

# =========================
# Custom Files Directory
# =========================
N8N_USER_FOLDER=/home/node/.n8n
N8N_CUSTOM_EXTENSIONS=/opt/n8n_custom

# =========================
# Proxy Configuration (Optional)
# Format: http://login:password@ip:port
# =========================
# HTTP_PROXY=http://user:pass@proxy.example.com:8080
# HTTPS_PROXY=http://user:pass@proxy.example.com:8080
# GLOBAL_HTTP_PROXY=http://user:pass@proxy.example.com:8080
# N8N_HTTP_PROXY=http://user:pass@proxy.example.com:8080
# N8N_HTTPS_PROXY=http://user:pass@proxy.example.com:8080
# NO_PROXY=localhost,127.0.0.1,n8n-postgres,n8n-redis,n8n-traefik

# =========================
# Gemini AI Configuration (Optional)
# Get API Key: https://aistudio.google.com/app/apikey
# =========================
# GEMINI_API_KEY=your_gemini_api_key
# GEMINI_CLI_PATH=/opt/gemini/gemini-cli

# =========================
# Telegram Bot (Optional)
# Create bot: https://t.me/BotFather
# Get User ID: https://t.me/userinfobot
# =========================
TG_BOT_TOKEN=your_telegram_bot_token
TG_USER_ID=your_telegram_user_id
